import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.issue.customfields.option.Option

def customFieldManager = ComponentAccessor.getCustomFieldManager()
def optionsManager = ComponentAccessor.getOptionsManager()

def escalatedField = customFieldManager.getCustomFieldObject("customfield_12345") // thay ID chính xác

if (!escalatedField) {
    return false
}

def fieldValue = issue.getCustomFieldValue(escalatedField) as Option

log.warn("Escalated value: ${fieldValue?.getValue()}")


// Nếu field rỗng hoặc giá trị không phải là option hợp lệ trong context hiện tại → chặn
if (!fieldValue) {
    return false
}

def config = escalatedField.getRelevantConfig(issue)
def validOptions = optionsManager.getOptions(config)

if (!validOptions.contains(fieldValue)) {
    return false // Giá trị đã chọn không còn hợp lệ trong context hiện tại
}

// So sánh giá trị option
return fieldValue.getValue() == "True"


Issue was previously Closed. Required field Escalated to be True to Reopen. Issue moved to In Progress. Please close again if needed.

{{issue.description.split("\n").get(0)}} - Event ID: {{issue.description.match("Event ID: (.+)").split("Event ID: ").get(1)}}
